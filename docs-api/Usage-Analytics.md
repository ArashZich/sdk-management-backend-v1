یک بخش دیگر باقی مانده است که مربوط به آنالیتیکس و استفاده (Usage/Analytics) است. بعد از این بخش، مستندات API ما کامل می‌شود.

# مستندات API استفاده و آنالیتیکس (Usage/Analytics)

این بخش شامل API‌های مربوط به آمار و تحلیل استفاده از SDK می‌باشد.

## پایه URL

```
/api/v1/usage
```

## API های استفاده و آنالیتیکس

### دریافت آنالیتیکس استفاده کاربر جاری

دریافت آمار و تحلیل استفاده کاربر وارد شده از SDK.

**URL:** `GET /usage/analytics`

**دسترسی:** کاربر وارد شده

**هدر های مورد نیاز:**
- `Authorization: Bearer {accessToken}`

**پارامترهای query (اختیاری):**
- `timeRange`: بازه زمانی (week, month, halfyear, year, all) - پیش‌فرض: month

**پاسخ موفق:**

```json
{
  "totalRequests": 250,
  "browserStats": {
    "Chrome": 150,
    "Firefox": 60,
    "Safari": 25,
    "Edge": 15
  },
  "deviceStats": {
    "Desktop": 180,
    "Mobile": 70
  },
  "osStats": {
    "Windows": 120,
    "macOS": 60,
    "iOS": 40,
    "Android": 30
  },
  "timeDistribution": {
    "byHour": {
      "9": 25,
      "10": 35,
      "11": 40,
      "12": 20,
      "13": 15,
      "14": 30,
      "15": 45,
      "16": 35,
      "17": 5
      // ساعات دیگر
    },
    "byDay": {
      "Monday": 45,
      "Tuesday": 50,
      "Wednesday": 55,
      "Thursday": 40,
      "Friday": 30,
      "Saturday": 20,
      "Sunday": 10
    },
    "byDate": {
      "2023-03-01": 15,
      "2023-03-02": 20,
      "2023-03-03": 25
      // تاریخ‌های دیگر
    }
  },
  "successRate": {
    "success": 245,
    "failed": 5,
    "rate": "98.00"
  }
}
```

**کدهای خطا:**
- `401`: دسترسی غیرمجاز

---

### دانلود آنالیتیکس استفاده کاربر جاری

دانلود اطلاعات کامل آمار و تحلیل استفاده کاربر وارد شده از SDK.

**URL:** `GET /usage/analytics/download`

**دسترسی:** کاربر وارد شده

**هدر های مورد نیاز:**
- `Authorization: Bearer {accessToken}`

**پاسخ موفق:**
فایل JSON با اطلاعات کامل آنالیتیکس (مشابه ساختار پاسخ API بالا اما با جزئیات بیشتر و برای کل تاریخچه).

**کدهای خطا:**
- `401`: دسترسی غیرمجاز

---

### دریافت آنالیتیکس استفاده کاربر (ادمین)

دریافت آمار و تحلیل استفاده یک کاربر خاص از SDK.

**URL:** `GET /usage/users/{userId}/analytics`

**دسترسی:** فقط ادمین

**هدر های مورد نیاز:**
- `Authorization: Bearer {accessToken}`

**پارامترهای URL:**
- `userId`: شناسه کاربر مورد نظر

**پارامترهای query (اختیاری):**
- `timeRange`: بازه زمانی (week, month, halfyear, year, all) - پیش‌فرض: month

**پاسخ موفق:**
ساختار پاسخ مشابه با API دریافت آنالیتیکس استفاده کاربر جاری است.

**کدهای خطا:**
- `401`: دسترسی غیرمجاز
- `403`: فقط برای ادمین قابل دسترسی است
- `404`: کاربر یافت نشد

---

### دانلود آنالیتیکس استفاده کاربر (ادمین)

دانلود اطلاعات کامل آمار و تحلیل استفاده یک کاربر خاص از SDK.

**URL:** `GET /usage/users/{userId}/analytics/download`

**دسترسی:** فقط ادمین

**هدر های مورد نیاز:**
- `Authorization: Bearer {accessToken}`

**پارامترهای URL:**
- `userId`: شناسه کاربر مورد نظر

**پاسخ موفق:**
فایل JSON با اطلاعات کامل آنالیتیکس (مشابه ساختار پاسخ API بالا اما با جزئیات بیشتر و برای کل تاریخچه).

**کدهای خطا:**
- `401`: دسترسی غیرمجاز
- `403`: فقط برای ادمین قابل دسترسی است
- `404`: کاربر یافت نشد